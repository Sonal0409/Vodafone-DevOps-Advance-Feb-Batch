# sudo su -

# cd /etc/ansible

Register Variable:


# vim playbook2.yml

- name: Debug module
  hosts: webserver
  tasks:
  - name: Execute a command on the host
    command: hostname -s
    register: command_output
  - name: Print the command output 
    debug: var=command_output


Save the file (:wq!)

# ansible-playbook playbook2.yml

=======================================================
# vim playbook3.yml

- name: Install packages and create a file
  hosts: webserver
  become: true # become plugin will be used to escalate the permission of current user to root permissions
  become_user: root
  tasks:
  - name: Install git on hostserver
    package: name=git state=present
  - name: Create a file on hostserver
    file: path=/tmp/file1 state=touch


save the file (:wq!)

# ansible-playbook playbook3.yml

===================================
# vim playbook4.yml

- name: Install packages and create a file
  hosts: localhost
  become: true
  become_user: root
  vars:
   pkg_name: git
   pkg_state: present
   file_path: /tmp/file2
   file_state: touch
  tasks:
  - name: Install {{pkg_name}} on hostserver
    package: name={{pkg_name}} state={{pkg_state}}
  - name: Create a file on hostserver
    file: path={{file_path}} state={{file_state}}


save the file(:wq) press enter key


# ansible-playbook playbook4.yml

=============================================
Pass Variable values at runtime:
==========================================

ansible-playbook playbook4.yml --extra-vars pkg_name=nano
ansible-playbook playbook4.yml --extra-vars "pkg_name=php file_path=/tmp/file3"


FACT VARIABLES:
=========================

# vim playbook5.yml

- hosts: localhost
  become: true
  become_user: root
  tasks:
  - name: Install package httpd
    package: name=httpd state=present
    when: ansible_os_family == "RedHat"
  - name: Install package apache2
    package: name=apache2 state=present
    when: ansible_os_family != "RedHat"


Save the file

# ansible-playbook playbook5.yml


# vim playbook7.yml

- hosts: webserver
  tasks:
  - name: Execute a command on the host
    command: hostname -s
    when: (ansible_distribution == "CentOS" and ansible_distribution_major_version == "8") or
          (ansible_distribution == "Ubuntu" and ansible_distribution_major_version == "20")

save the file

# ansible-playbook playbook7.yml















